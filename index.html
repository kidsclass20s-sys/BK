<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Football Scoreboard — Scaled Final</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --green:#7fffb3;
    --maroon:#6e1f1f;
    --black:#000;
    --white:#fff;
    --panel-bg:#ffffff;
    --panel-border:#e6e6e6;
    --scrollbar:#bfbfbf;
  }

  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;width:100%;background:#111;font-family:Arial,Helvetica,sans-serif;overflow:hidden}
  .viewport{position:relative;width:100%;height:100%;background:#000;display:flex;align-items:center;justify-content:center}

  /* 16:9 centered video frame (unchanged) */
  .video-frame{
    position:relative;
    width: min(100vw, calc(100vh * 16 / 9));
    height: calc((min(100vw, calc(100vh * 16 / 9))) * 9 / 16);
    max-height:100vh;
    background:#000;
    overflow:hidden;
    z-index:0;
  }
  .video-frame video{width:100%;height:100%;object-fit:cover;display:block}

  /* overlay inside frame */
  .video-overlay { position:absolute; inset:0; pointer-events:none; z-index:30; }

  /* LIVE badge (same) */
  .live-badge{
    position:absolute;
    top:12px;
    right:18px;
    display:flex;
    align-items:center;
    gap:8px;
    background:#d92b2b;
    color:#fff;
    padding:6px 12px;
    border-radius:6px;
    font-size:13px;
    font-weight:800;
    user-select:none;
    pointer-events:auto;

    /* --- CHANGES FOR USER REQUEST ---
       1) Make the entire badge 70% smaller => scale(0.3)
       2) Keep it static (disable animation on the dot)
       3) Ensure transform-origin at top right so it stays anchored to the corner
    */
    transform: scale(0.3);
    transform-origin: top right;
  }
  .live-dot{width:10px;height:10px;border-radius:50%;background:#fff; /* animation disabled */ animation: none; }
  @keyframes pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.35);opacity:.6}100%{transform:scale(1);opacity:1}}

  /* -----------------------
     SCOREBOARD: GLOBAL SCALE
     - overall scoreboard reduced by 40% (i.e. scale = 0.6)
     - transform-origin top-left to keep consistent top-left placement
     ----------------------- */
  .scoreboard{
    position:absolute; top:18px; left:18px; z-index:31; display:flex; align-items:center; gap:0;
    user-select:none; pointer-events:auto;
    transform: scale(0.6);              /* 40% smaller overall (60% of original) */
    transform-origin: top left;
    white-space:nowrap;
  }

  /* Timer box (clickable) */
  .time-box{
    background:var(--black); color:var(--white); padding:8px 14px; font-weight:900; font-size:16px; border-radius:4px 0 0 4px;
    display:flex; align-items:center; justify-content:center; min-width:64px; text-align:center;
    box-shadow:0 1px 0 rgba(255,255,255,0.06) inset; cursor:pointer;
    pointer-events:auto;
  }

  /* Team boxes (team name exact spacing preserved) */
  .team-box{ background:var(--green); color:#000; padding:8px 26px; font-weight:900; font-size:20px; letter-spacing:1px; white-space: pre; cursor:pointer; }
  .team-box.right{ border-radius:0 4px 4px 0 }

  /* -----------------------
     CENTER SCORE: reduce width by 60% (keep other styles)
     Original min-width ~80px and max-width ~120px in previous iterations.
     Now make it 40% of original width -> min 32px, max 48px.
     (Because overall scoreboard is already scaled, these absolute values
     will appear appropriately small — this matches "first scale then shrink center")
     ----------------------- */
  .score-center{
    background:var(--maroon);
    color:var(--white);
    padding:8px 8px;               /* narrower padding */
    font-weight:900;
    font-size:20px;
    letter-spacing:6px;
    border-left:2px solid rgba(255,255,255,0.04);
    border-right:2px solid rgba(255,255,255,0.04);
    display:flex;
    align-items:center;
    justify-content:center;
    min-width:32px;               /* 40% of previous ~80 */
    max-width:48px;               /* 40% of previous ~120 */
    text-align:center;
    pointer-events:auto;
  }

  /* preserve spaces exactly typed */
  .team-box span { white-space: pre; display:inline-block; }

  /* Adjust fonts slightly for small screens so alignment remains neat */
  @media (max-width:900px){
    .time-box{ font-size:15px; padding:6px 12px; min-width:56px }
    .team-box{ font-size:18px; padding:6px 18px }
    .score-center{ font-size:18px; padding:6px 6px; letter-spacing:4px; min-width:26px; max-width:44px }
  }

  @media (max-width:420px){
    .time-box{ font-size:14px; padding:5px 10px; min-width:52px }
    .team-box{ font-size:16px; padding:5px 12px }
    .score-center{ font-size:16px; padding:5px 5px; letter-spacing:3px; min-width:24px; max-width:40px }
  }

  /* match simulation bottom-right */
  .match-sim{
    position:absolute; right:18px; bottom:14px; z-index:31; color:#fff; font-weight:900; font-size:14px; text-transform:uppercase;
    user-select:none; pointer-events:none;

    /* --- CHANGES FOR USER REQUEST ---
       Reduce Match Simulation size by 60% (i.e. keep 40% of original size)
       Use transform so position remains same and all other behavior unchanged.
    */
    transform: scale(0.4);
    transform-origin: right bottom;
  }

  /* Settings gear positioning logic (same) */
  .settings-btn{
    position:absolute; right:18px; top:12px; z-index:32; background:#fff; border-radius:50%; padding:8px 10px; font-size:18px; cursor:pointer;
    pointer-events:auto; border: none;
  }
  @media screen and (orientation: landscape) and (max-width: 900px){
    .settings-btn{ display:none !important; }
  }
  @media screen and (orientation: portrait) and (max-width: 900px){
    .settings-btn{ top:auto; right:12px; bottom:12px; }
  }

  /* Settings panel (unchanged, mobile full-screen outside frame behavior retained) */
  .settings-panel{
    position:absolute; right:18px; top:56px; z-index:33; width:320px; max-width:42%;
    background:var(--panel-bg); border:1px solid var(--panel-border); border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,0.45);
    pointer-events:auto; display:none;
    overflow:visible;
    display:flex; flex-direction:column;
    max-height: calc(100% - 72px);
  }
  .panel-header{
    display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--panel-border);
    cursor:grab; user-select:none; background:transparent;
  }
  .panel-header .title{font-weight:900; font-size:14px; color:#111}
  .panel-header .hint{font-size:12px;color:#666}
  .panel-content{ padding:10px 12px; overflow-y:auto; -webkit-overflow-scrolling:touch; }
  .panel-content{ scrollbar-width: thin; scrollbar-color: var(--scrollbar) transparent; }
  .panel-content::-webkit-scrollbar{ width:10px; }
  .panel-content::-webkit-scrollbar-track{ background: transparent; }
  .panel-content::-webkit-scrollbar-thumb{ background: linear-gradient(180deg, var(--scrollbar), #8f8f8f); border-radius:8px; border:2px solid rgba(255,255,255,0.06); }
  .settings-panel label{ display:block; font-size:13px; color:#222; margin-top:10px; margin-bottom:6px; font-weight:700 }
  .settings-panel input[type="text"], .settings-panel input[type="number"], .settings-panel input[type="file"]{
    width:100%; padding:10px; font-size:14px; border-radius:8px; border:1px solid #e6e6e6; background:#fff; color:#111;
  }
  .panel-footer{ display:flex; gap:8px; justify-content:flex-end; padding:10px 12px; border-top:1px solid var(--panel-border); background:transparent; }
  .panel-footer button{ padding:8px 12px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer; font-weight:700 }
  @media screen and (orientation: portrait) and (max-width:900px){
    .settings-panel{
      position:fixed !important;
      top:8px !important;
      bottom:8px !important;
      left:8px !important;
      right:8px !important;
      width:auto !important;
      max-width:none !important;
      border-radius:12px;
      display:none;
      max-height: calc(100vh - 16px) !important;
    }
    .panel-content{ padding-bottom:16px; }
  }
  .grip{ width:36px; height:6px; border-radius:3px; background:#ddd; opacity:0.9; margin-left:8px; }
  .hidden{ display:none !important }
</style>
</head>
<body>
  <div class="viewport">
    <div class="video-frame" id="videoFrame">
      <video id="bgVideo" autoplay loop muted playsinline>
        <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
      </video>

      <div class="video-overlay">

        <div class="live-badge" id="liveBadge"><div class="live-dot"></div>LIVE</div>

        <!-- Scoreboard: scaled and with narrow center block -->
        <div class="scoreboard" id="scoreboard" aria-hidden="false">
          <div class="time-box" id="timeBox" role="button" aria-label="Timer">00:00</div>
          <div class="team-box" id="teamA"><span id="teamAText">PAK</span></div>
          <div class="score-center" id="scoreCenter" aria-hidden="false">
            <!-- Combined score: LEFT - RIGHT -->
            <span id="scoreALeft" style="cursor:pointer;">0</span><span style="display:inline-block; width:8px; text-align:center;"> - </span><span id="scoreBRight" style="cursor:pointer;">0</span>
          </div>
          <div class="team-box right" id="teamB"><span id="teamBText">IND</span></div>
        </div>

        <div class="match-sim" id="matchSim">Match Simulation</div>

        <button class="settings-btn" id="openSettings" aria-label="Open settings">⚙️</button>

        <div class="settings-panel" id="settingsPanel" role="dialog" aria-label="Settings">
          <div class="panel-header" id="panelHeader">
            <div style="display:flex;align-items:center;gap:10px">
              <div class="grip" aria-hidden="true"></div>
              <div class="title">Settings</div>
            </div>
            <div class="hint">Drag</div>
          </div>

          <div class="panel-content" id="panelContent">
            <label for="inputTeamA">Team A Name (exact spacing preserved)</label>
            <input type="text" id="inputTeamA" placeholder="South Africa" autocomplete="off" />

            <label for="inputTeamB">Team B Name (exact spacing preserved)</label>
            <input type="text" id="inputTeamB" placeholder="England" autocomplete="off" />

            <label for="inputVideo">Gameplay Video (loop)</label>
            <input type="file" id="inputVideo" accept="video/*">

            <label for="inputMusic">Background Music (optional)</label>
            <input type="file" id="inputMusic" accept="audio/*">

            <label for="inputGoal">Goal Celebration Sound (optional)</label>
            <input type="file" id="inputGoal" accept="audio/*">

            <label for="inputMin">Timer Start Minutes</label>
            <input type="number" id="inputMin" value="0" min="0">

            <label for="inputSec">Timer Start Seconds</label>
            <input type="number" id="inputSec" value="0" min="0" max="59">
          </div>

          <div class="panel-footer">
            <button id="applyBtn">Apply</button>
            <button id="closeBtn">Close</button>
          </div>
        </div>

      </div>
    </div>

    <audio id="bgMusic" loop></audio>
  </div>

<script>
  /* Elements */
  const bgVideo = document.getElementById('bgVideo');
  const timeBox = document.getElementById('timeBox');
  const teamAText = document.getElementById('teamAText');
  const teamBText = document.getElementById('teamBText');
  const scoreALeft = document.getElementById('scoreALeft');
  const scoreBRight = document.getElementById('scoreBRight');
  const scoreCenter = document.getElementById('scoreCenter');
  const matchSim = document.getElementById('matchSim');

  const openBtn = document.getElementById('openSettings');
  const panel = document.getElementById('settingsPanel');
  const panelHeader = document.getElementById('panelHeader');
  const panelContent = document.getElementById('panelContent');
  const applyBtn = document.getElementById('applyBtn');
  const closeBtn = document.getElementById('closeBtn');

  const inputTeamA = document.getElementById('inputTeamA');
  const inputTeamB = document.getElementById('inputTeamB');
  const inputVideo = document.getElementById('inputVideo');
  const inputMusic = document.getElementById('inputMusic');
  const inputGoal  = document.getElementById('inputGoal');
  const inputMin = document.getElementById('inputMin');
  const inputSec = document.getElementById('inputSec');

  /* State */
  let scoreA = 0;
  let scoreB = 0;
  let timerSeconds = 0;
  let timerInterval = null;
  let matchState = 'stopped'; // 'stopped','running','half','full'
  let halfOccurred = false;

  let goalUrl = null, currentGoalAudio = null, goalTimerRef = null;

  /* Helpers */
  function formatTime(s){
    const mm = String(Math.floor(s/60)).padStart(2,'0');
    const ss = String(s%60).padStart(2,'0');
    return `${mm}:${ss}`;
  }
  function updateTimeBoxDisplay(){
    if(matchState === 'half'){ timeBox.textContent = 'HT'; }
    else if(matchState === 'full'){ timeBox.textContent = 'FT'; }
    else { timeBox.textContent = formatTime(timerSeconds); }
  }
  function renderScores(){
    scoreALeft.textContent = String(scoreA);
    scoreBRight.textContent = String(scoreB);
  }
  function playGoalSoundSafely(){
    if(!goalUrl) return;
    try{
      if(currentGoalAudio){ currentGoalAudio.pause(); currentGoalAudio = null; }
      if(goalTimerRef) clearTimeout(goalTimerRef);
      const a = new Audio(goalUrl);
      a.currentTime = 0;
      a.play().catch(()=>{});
      currentGoalAudio = a;
      goalTimerRef = setTimeout(()=>{ if(currentGoalAudio){ try{ currentGoalAudio.pause(); currentGoalAudio = null; }catch(e){} } goalTimerRef = null; },3000);
    }catch(e){}
  }
  function startTimer(){
    if(timerInterval) return;
    timerInterval = setInterval(()=>{ timerSeconds++; updateTimeBoxDisplay(); },1000);
  }
  function stopTimer(){ if(timerInterval){ clearInterval(timerInterval); timerInterval = null; } }

  /* Timer click: isolated to timer element; ignore if input focused */
  timeBox.addEventListener('click', (e)=>{
    const active = document.activeElement;
    if(active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA')) return;

    if(matchState === 'stopped'){
      startTimer(); matchState = 'running'; halfOccurred = false; updateTimeBoxDisplay();
    } else if(matchState === 'running'){
      if(halfOccurred === true){ stopTimer(); matchState = 'full'; updateTimeBoxDisplay(); }
      else{ stopTimer(); matchState = 'half'; halfOccurred = true; updateTimeBoxDisplay(); }
    } else if(matchState === 'half'){
      matchState = 'running'; startTimer(); updateTimeBoxDisplay();
    } else if(matchState === 'full'){
      stopTimer(); timerSeconds = 0; matchState = 'stopped'; halfOccurred = false; updateTimeBoxDisplay();
    }
  });

  /* Center score click: keep original behavior (increments Team A) */
  scoreCenter.addEventListener('click', (e)=>{
    // If user clicked specifically on right score span, let its own handler take precedence.
    // Otherwise increment Team A (preserves old behavior).
    const target = e.target;
    if(target === scoreBRight) return; // handled separately
    scoreA++;
    renderScores();
    playGoalSoundSafely();
  });

  /* Click on left score span increments Team A */
  scoreALeft.addEventListener('click', (e)=>{
    e.stopPropagation();
    scoreA++;
    renderScores();
    playGoalSoundSafely();
  });

  /* Click on right score span increments Team B */
  scoreBRight.addEventListener('click', (e)=>{
    e.stopPropagation();
    scoreB++;
    renderScores();
    playGoalSoundSafely();
  });

  /* Click on left team-box increments Team A (keeps UI intuitive) */
  document.getElementById('teamA').addEventListener('click', (e)=>{
    // ignore when focused on input fields
    const active = document.activeElement;
    if(active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA')) return;
    scoreA++;
    renderScores();
    playGoalSoundSafely();
  });

  /* Click on right team-box increments Team B */
  document.getElementById('teamB').addEventListener('click', (e)=>{
    const active = document.activeElement;
    if(active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA')) return;
    scoreB++;
    renderScores();
    playGoalSoundSafely();
  });

  /* Settings open/close + responsive behavior (mobile panel outside frame) */
  function openPanel(){
    panel.style.display = 'flex';
    const isPortraitMobile = window.matchMedia('(orientation: portrait) and (max-width: 900px)').matches;
    if(isPortraitMobile){
      panel.style.position = 'fixed';
      panel.style.top = '8px';
      panel.style.left = '8px';
      panel.style.right = '8px';
      panel.style.bottom = '8px';
      panel.style.width = 'auto';
      panel.style.maxWidth = 'none';
      panel.style.height = 'auto';
      panelContent.style.overflowY = 'auto';
    } else {
      panel.style.position = 'absolute';
      panel.style.top = panel.style.top || '56px';
      panel.style.right = panel.style.right || '18px';
      panel.style.left = '';
      panel.style.bottom = '';
      panel.style.width = panel.style.width || '320px';
      panel.style.maxWidth = '42%';
      panelContent.style.overflowY = 'auto';
    }
    // populate inputs with current display preserving spaces
    inputTeamA.value = teamAText.textContent;
    inputTeamB.value = teamBText.textContent;
  }
  function closePanel(){
    panel.style.display = 'none';
    panel.style.position = '';
    panel.style.top = '';
    panel.style.right = '';
    panel.style.left = '';
    panel.style.bottom = '';
    panel.style.width = '';
    panel.style.maxWidth = '';
    panel.style.height = '';
  }

  openBtn.addEventListener('click', ()=> { if(panel.style.display==='flex' || panel.style.display==='block') closePanel(); else openPanel(); });
  closeBtn.addEventListener('click', ()=> closePanel());

  /* Apply settings: preserve exact spaces; update timer start; load files */
  applyBtn.addEventListener('click', ()=>{
    const rawA = inputTeamA.value !== undefined ? inputTeamA.value : 'PAK';
    const rawB = inputTeamB.value !== undefined ? inputTeamB.value : 'IND';
    teamAText.textContent = rawA;
    teamBText.textContent = rawB;

    const mins = parseInt(inputMin.value) || 0;
    const secs = parseInt(inputSec.value) || 0;
    timerSeconds = mins*60 + secs;
    updateTimeBoxDisplay();

    const vfile = inputVideo.files[0];
    if(vfile){ try{ const url = URL.createObjectURL(vfile); bgVideo.src = url; bgVideo.load(); bgVideo.play().catch(()=>{}); }catch(e){} }

    const mfile = inputMusic.files[0];
    if(mfile){ try{ const url = URL.createObjectURL(mfile); document.getElementById('bgMusic').src = url; document.getElementById('bgMusic').muted = false; document.getElementById('bgMusic').play().catch(()=>{}); }catch(e){} }

    const gfile = inputGoal.files[0];
    if(gfile){ try{ goalUrl = URL.createObjectURL(gfile); }catch(e){} }

    closePanel();
  });

  /* Dragging for header (move panel) */
  (function enablePanelDrag(){
    let dragging = false;
    let startY = 0;
    let startTop = 0;

    function clampTop(t){
      const minTop = 8;
      const maxTop = window.innerHeight - (panel.getBoundingClientRect().height + 8);
      return Math.min(Math.max(t, minTop), Math.max(minTop, maxTop));
    }
    panelHeader.addEventListener('mousedown', (e)=>{
      dragging = true;
      startY = e.clientY;
      startTop = panel.getBoundingClientRect().top;
      panelHeader.style.cursor = 'grabbing';
      document.body.style.userSelect = 'none';
    });
    window.addEventListener('mousemove', (e)=>{
      if(!dragging) return;
      const dy = e.clientY - startY;
      const newTop = clampTop(startTop + dy);
      panel.style.position = 'fixed';
      panel.style.top = `${newTop}px`;
      panel.style.bottom = 'auto';
    });
    window.addEventListener('mouseup', ()=>{ if(dragging){ dragging=false; panelHeader.style.cursor='grab'; document.body.style.userSelect=''; } });

    // touch
    panelHeader.addEventListener('touchstart', (ev)=>{
      const t = ev.touches[0];
      dragging = true;
      startY = t.clientY;
      startTop = panel.getBoundingClientRect().top;
    }, {passive:true});
    window.addEventListener('touchmove', (ev)=>{
      if(!dragging) return;
      const t = ev.touches[0];
      const dy = t.clientY - startY;
      const newTop = clampTop(startTop + dy);
      panel.style.position = 'fixed';
      panel.style.top = `${newTop}px`;
      panel.style.bottom = 'auto';
    }, {passive:true});
    window.addEventListener('touchend', ()=>{ dragging=false; });
  })();

  /* Keyboard behavior: only trigger timer/shortcuts when not typing */
  document.addEventListener('keydown', (e) => {
    const active = document.activeElement;
    const isInputFocused = active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA');
    if(e.code === 'Space' || e.key === ' '){
      if(isInputFocused) return;
      e.preventDefault();
      timeBox.click();
      return;
    }
    if(!isInputFocused){
      if(e.key === 'a' || e.key === 'A'){ scoreCenter.click(); } // increments Team A (same)
      if(e.key === 'l' || e.key === 'L'){ scoreCenter.click(); } // increments Team A (same)
    }
  });

  /* Defaults */
  teamAText.textContent = 'PAK';
  teamBText.textContent = 'IND';
  updateTimeBoxDisplay();
  renderScores();
  matchSim.textContent = 'Match Simulation';
  inputMin.value = '0';
  inputSec.value = '0';

  window.addEventListener('load', ()=>{ bgVideo.play().catch(()=>{}); });
  window.addEventListener('resize', ()=>{ if(panel.style.display==='flex' || panel.style.display==='block') openPanel(); });
  window.addEventListener('orientationchange', ()=>{ setTimeout(()=>{ if(panel.style.display==='flex' || panel.style.display==='block') openPanel(); },250); });

  window.addEventListener('beforeunload', ()=>{
    if(timerInterval) clearInterval(timerInterval);
    if(currentGoalAudio){ try{ currentGoalAudio.pause(); currentGoalAudio = null; }catch(e){} }
    if(goalTimerRef) clearTimeout(goalTimerRef);
  });
</script>
</body>
</html>