<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Football Scoreboard — Mobile-Friendly Final</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --green:#7fffb3;
    --maroon:#6e1f1f;
    --black:#000;
    --white:#fff;
    --panel-bg:#ffffff;
    --panel-border:#e6e6e6;
    --scrollbar:#bfbfbf;
  }

  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;width:100%;background:#111;font-family:Arial,Helvetica,sans-serif;overflow:hidden}
  .viewport{position:relative;width:100%;height:100%;background:#000;display:flex;align-items:center;justify-content:center}

  /* 16:9 centered video frame */
  .video-frame{
    position:relative;
    width: min(100vw, calc(100vh * 16 / 9));
    height: calc((min(100vw, calc(100vh * 16 / 9))) * 9 / 16);
    max-height:100vh;
    background:#000;
    overflow:hidden;
    z-index:0;
  }
  .video-frame video{width:100%;height:100%;object-fit:cover;display:block}

  /* overlay inside frame */
  .video-overlay { position:absolute; inset:0; pointer-events:none; z-index:30; }

  /* LIVE badge */
  .live-badge{
    position:absolute; top:12px; right:18px; display:flex; align-items:center; gap:8px;
    background:#d92b2b; color:#fff; padding:6px 12px; border-radius:6px; font-size:13px; font-weight:800;
    user-select:none; pointer-events:auto;
  }
  .live-dot{width:10px;height:10px;border-radius:50%;background:#fff;animation:pulse 1.2s infinite}
  @keyframes pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.35);opacity:.6}100%{transform:scale(1);opacity:1}}

  /* Scoreboard (top-left) - 25% smaller */
  .scoreboard{
    position:absolute; top:18px; left:18px; z-index:31; display:flex; align-items:center; gap:0;
    user-select:none; pointer-events:auto;
    transform: scale(0.75);
    transform-origin: top left;
  }
  .time-box{
    background:var(--black); color:var(--white); padding:8px 14px; font-weight:900; font-size:16px; border-radius:4px 0 0 4px;
    display:flex; align-items:center; justify-content:center; min-width:64px; text-align:center;
    box-shadow:0 1px 0 rgba(255,255,255,0.06) inset; cursor:pointer;
  }
  .team-box{ background:var(--green); color:#000; padding:8px 26px; font-weight:900; font-size:20px; letter-spacing:1px }
  .score-center{ background:var(--maroon); color:var(--white); padding:8px 22px; font-weight:900; font-size:20px; letter-spacing:6px; border-left:2px solid rgba(255,255,255,0.04); border-right:2px solid rgba(255,255,255,0.04) }
  .team-box.right{ border-radius:0 4px 4px 0 }

  .score-center span, .team-box span { cursor:pointer; display:inline-block; pointer-events:auto; }

  /* match simulation bottom-right */
  .match-sim{
    position:absolute; right:18px; bottom:14px; z-index:31; color:#fff; font-weight:900; font-size:14px; text-transform:uppercase;
    user-select:none; pointer-events:none;
  }

  /* Settings gear - top-right normally, bottom-right on mobile portrait */
  .settings-btn{
    position:absolute; right:18px; top:12px; z-index:32; background:#fff; border-radius:50%; padding:8px 10px; font-size:18px; cursor:pointer;
    pointer-events:auto; border: none;
  }
  /* hide gear in mobile landscape */
  @media screen and (orientation: landscape) and (max-width: 900px){
    .settings-btn{ display:none !important; }
  }
  /* move gear to bottom-right in mobile portrait */
  @media screen and (orientation: portrait) and (max-width: 900px){
    .settings-btn{ top:auto; right:12px; bottom:12px; }
  }

  /* Clean panel (desktop/tablet default) */
  .settings-panel{
    position:absolute; right:18px; top:56px; z-index:33; width:320px; max-width:42%;
    background:var(--panel-bg); border:1px solid var(--panel-border); border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,0.45);
    pointer-events:auto; display:none;
    overflow:visible;
    display:flex; flex-direction:column;
    max-height: calc(100% - 72px);
  }

  /* Header (drag handle) */
  .panel-header{
    display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--panel-border);
    cursor:grab; user-select:none; background:transparent;
  }
  .panel-header .title{font-weight:900; font-size:14px; color:#111}
  .panel-header .hint{font-size:12px;color:#666}

  /* Content area scrollable */
  .panel-content{
    padding:10px 12px;
    overflow-y:auto;
    -webkit-overflow-scrolling:touch;
  }

  /* visible scrollbar */
  .panel-content{
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar) transparent;
  }
  .panel-content::-webkit-scrollbar{ width:10px; }
  .panel-content::-webkit-scrollbar-track{ background: transparent; }
  .panel-content::-webkit-scrollbar-thumb{ background: linear-gradient(180deg, var(--scrollbar), #8f8f8f); border-radius:8px; border:2px solid rgba(255,255,255,0.06); }

  /* form elements */
  .settings-panel label{ display:block; font-size:13px; color:#222; margin-top:10px; margin-bottom:6px; font-weight:700 }
  .settings-panel input[type="text"], .settings-panel input[type="number"], .settings-panel input[type="file"]{
    width:100%; padding:10px; font-size:14px; border-radius:8px; border:1px solid #e6e6e6; background:#fff; color:#111;
  }

  /* sticky footer with buttons */
  .panel-footer{
    display:flex; gap:8px; justify-content:flex-end; padding:10px 12px; border-top:1px solid var(--panel-border); background:transparent;
  }
  .panel-footer button{ padding:8px 12px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer; font-weight:700 }

  /* Mobile portrait specific: panel takes vertical size of viewport/frame and becomes scrollable if content exceeds */
  @media screen and (orientation: portrait) and (max-width:900px){
    .settings-panel{
      /* We'll override exact height via JS to match video-frame; CSS fallback: almost full viewport */
      position:fixed; /* fixed to viewport for portrait mobile for easier use */
      right:12px;
      bottom:12px;
      top:12px;
      width: calc(100vw - 24px);
      max-width:420px;
      border-radius:12px;
      display:none;
      max-height: calc(100vh - 24px);
    }
    .panel-content{ padding-bottom:16px; }
  }

  /* small screens tweak */
  @media (max-width:420px){
    .settings-panel{ width:92vw; right:8px; left:8px;}
  }

  .grip{ width:36px; height:6px; border-radius:3px; background:#ddd; opacity:0.9; margin-left:8px; }

  .hidden{ display:none !important }
</style>
</head>
<body>
  <div class="viewport">
    <div class="video-frame" id="videoFrame">
      <video id="bgVideo" autoplay loop muted playsinline>
        <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
      </video>

      <div class="video-overlay">

        <div class="live-badge" id="liveBadge"><div class="live-dot"></div>LIVE</div>

        <div class="scoreboard" id="scoreboard">
          <div class="time-box" id="timeBox">00:00</div>
          <div class="team-box" id="teamA">PAK</div>
          <div class="score-center" id="scoreCenter"><span id="scoreA">0</span> &nbsp;-&nbsp; <span id="scoreB">0</span></div>
          <div class="team-box right" id="teamB">IND</div>
        </div>

        <div class="match-sim" id="matchSim">Match Simulation</div>

        <button class="settings-btn" id="openSettings" aria-label="Open settings">⚙️</button>

        <div class="settings-panel" id="settingsPanel" role="dialog" aria-label="Settings">
          <div class="panel-header" id="panelHeader">
            <div style="display:flex;align-items:center;gap:10px">
              <div class="grip" aria-hidden="true"></div>
              <div class="title">Settings</div>
            </div>
            <div class="hint">Drag</div>
          </div>

          <div class="panel-content" id="panelContent">
            <!-- Minimal essentials -->
            <label for="inputTeamA">Team A Name</label>
            <input type="text" id="inputTeamA" placeholder="PAK">

            <label for="inputTeamB">Team B Name</label>
            <input type="text" id="inputTeamB" placeholder="IND">

            <label for="inputVideo">Gameplay Video (loop)</label>
            <input type="file" id="inputVideo" accept="video/*">

            <label for="inputMusic">Background Music (optional)</label>
            <input type="file" id="inputMusic" accept="audio/*">

            <label for="inputGoal">Goal Celebration Sound (optional)</label>
            <input type="file" id="inputGoal" accept="audio/*">

            <label for="inputMin">Timer Start Minutes</label>
            <input type="number" id="inputMin" value="0" min="0">

            <label for="inputSec">Timer Start Seconds</label>
            <input type="number" id="inputSec" value="0" min="0" max="59">
          </div>

          <div class="panel-footer">
            <button id="applyBtn">Apply</button>
            <button id="closeBtn">Close</button>
          </div>
        </div>

      </div>
    </div>

    <audio id="bgMusic" loop></audio>
  </div>

<script>
  /* Basic elements */
  const bgVideo = document.getElementById('bgVideo');
  const timeBox = document.getElementById('timeBox');
  const teamAEl = document.getElementById('teamA');
  const teamBEl = document.getElementById('teamB');
  const scoreAEl = document.getElementById('scoreA');
  const scoreBEl = document.getElementById('scoreB');
  const matchSim = document.getElementById('matchSim');

  const openBtn = document.getElementById('openSettings');
  const panel = document.getElementById('settingsPanel');
  const panelHeader = document.getElementById('panelHeader');
  const panelContent = document.getElementById('panelContent');
  const applyBtn = document.getElementById('applyBtn');
  const closeBtn = document.getElementById('closeBtn');

  const inputVideo = document.getElementById('inputVideo');
  const inputMusic = document.getElementById('inputMusic');
  const inputGoal  = document.getElementById('inputGoal');
  const inputMin = document.getElementById('inputMin');
  const inputSec = document.getElementById('inputSec');

  /* State */
  let scoreA = 0, scoreB = 0;
  let timerSeconds = 0;
  let timerInterval = null;
  let matchState = 'stopped'; // 'stopped','running','half','full'
  let halfOccurred = false;

  let goalUrl = null, currentGoalAudio = null, goalTimerRef = null;

  function formatTime(s){
    const mm = String(Math.floor(s/60)).padStart(2,'0');
    const ss = String(s%60).padStart(2,'0');
    return `${mm}:${ss}`;
  }
  function updateTimeBoxDisplay(){
    if(matchState === 'half'){ timeBox.textContent = 'HT'; }
    else if(matchState === 'full'){ timeBox.textContent = 'FT'; }
    else { timeBox.textContent = formatTime(timerSeconds); }
  }
  function startTimer(){
    if(timerInterval) return;
    timerInterval = setInterval(()=>{ timerSeconds++; updateTimeBoxDisplay(); },1000);
  }
  function stopTimer(){ if(timerInterval){ clearInterval(timerInterval); timerInterval = null; } }

  /* Timer click logic */
  timeBox.addEventListener('click', ()=>{
    if(matchState === 'stopped'){ startTimer(); matchState = 'running'; halfOccurred = false; updateTimeBoxDisplay(); }
    else if(matchState === 'running'){
      if(halfOccurred === true){ stopTimer(); matchState = 'full'; updateTimeBoxDisplay(); }
      else{ stopTimer(); matchState = 'half'; halfOccurred = true; updateTimeBoxDisplay(); }
    } else if(matchState === 'half'){ matchState = 'running'; startTimer(); updateTimeBoxDisplay(); }
    else if(matchState === 'full'){ stopTimer(); timerSeconds = 0; matchState = 'stopped'; halfOccurred = false; updateTimeBoxDisplay(); }
  });

  /* Score clicks */
  scoreAEl.addEventListener('click', ()=>{ scoreA++; scoreAEl.textContent = scoreA; playGoalSoundIfAny(); });
  scoreBEl.addEventListener('click', ()=>{ scoreB++; scoreBEl.textContent = scoreB; playGoalSoundIfAny(); });

  function playGoalSoundIfAny(){
    if(!goalUrl) return;
    try{
      if(currentGoalAudio){ currentGoalAudio.pause(); currentGoalAudio = null; }
      if(goalTimerRef) clearTimeout(goalTimerRef);
      const a = new Audio(goalUrl);
      a.currentTime = 0;
      a.play().catch(()=>{});
      currentGoalAudio = a;
      goalTimerRef = setTimeout(()=>{ if(currentGoalAudio){ try{ currentGoalAudio.pause(); currentGoalAudio = null; }catch(e){} } goalTimerRef = null; },3000);
    }catch(e){}
  }

  /* Settings open/close + adaptive sizing for mobile portrait */
  function openPanel(){
    // set panel visible
    panel.style.display = 'flex';
    // if mobile portrait small screens - set panel height to match video-frame available height
    const isPortraitMobile = window.matchMedia('(orientation: portrait) and (max-width: 900px)').matches;
    if(isPortraitMobile){
      // position the panel fixed near the frame area to feel native
      // compute video-frame rect to set top/bottom such that panel fits inside viewport
      const frame = document.getElementById('videoFrame');
      const fRect = frame.getBoundingClientRect();
      // If frame height is smaller than viewport, prefer frame height; else use viewport
      const availableTop = Math.max(8, Math.round(fRect.top + 8)); // small padding
      const availableBottom = Math.max(8, Math.round(window.innerHeight - fRect.bottom + 8));
      // set panel to match frame vertical space if possible
      const topPx = availableTop;
      const heightPx = Math.max(120, fRect.height - 16); // ensure minimal height
      // apply
      panel.style.position = 'fixed';
      panel.style.top = `${topPx}px`;
      panel.style.bottom = 'auto';
      panel.style.height = `${heightPx}px`;
      panel.style.right = `${Math.max(8, window.innerWidth - (fRect.right) + 8)}px`; // keep inside frame
      panel.style.left = 'auto';
      panel.style.width = Math.min(420, Math.max(260, Math.round(fRect.width * 0.92))) + 'px';
      panelContent.scrollTop = 0;
      // ensure content can scroll
      panelContent.style.overflowY = 'auto';
    } else {
      // desktop/tablet: make panel positioned relative inside frame
      panel.style.position = 'absolute';
      panel.style.top = panel.style.top || '56px';
      panel.style.right = '18px';
      panel.style.left = 'auto';
      panel.style.height = '';
      panel.style.width = panel.style.width || '320px';
      panelContent.style.overflowY = 'auto';
    }
  }

  function closePanel(){
    panel.style.display = 'none';
    // reset inline sizes when closing (so layout is fresh next open)
    panel.style.height = '';
    panel.style.top = '';
    panel.style.right = '';
    panel.style.width = '';
  }

  openBtn.addEventListener('click', ()=> {
    if(panel.style.display === 'flex' || panel.style.display === 'block') closePanel(); else openPanel();
  });
  closeBtn.addEventListener('click', ()=> closePanel());

  applyBtn.addEventListener('click', ()=>{
    const tA = document.getElementById('inputTeamA').value.trim();
    const tB = document.getElementById('inputTeamB').value.trim();
    if(tA) teamAEl.textContent = tA.toUpperCase();
    if(tB) teamBEl.textContent = tB.toUpperCase();

    const mins = parseInt(inputMin.value) || 0;
    const secs = parseInt(inputSec.value) || 0;
    timerSeconds = mins*60 + secs;
    updateTimeBoxDisplay();

    const vfile = inputVideo.files[0];
    if(vfile){ try{ const url = URL.createObjectURL(vfile); bgVideo.src = url; bgVideo.load(); bgVideo.play().catch(()=>{}); }catch(e){} }

    const mfile = inputMusic.files[0];
    if(mfile){ try{ const url = URL.createObjectURL(mfile); document.getElementById('bgMusic').src = url; document.getElementById('bgMusic').muted = false; document.getElementById('bgMusic').play().catch(()=>{}); }catch(e){} }

    const gfile = inputGoal.files[0];
    if(gfile){ try{ goalUrl = URL.createObjectURL(gfile); }catch(e){} }

    closePanel();
  });

  /* Dragging - allow moving the panel vertically while keeping it inside the video frame bounds */
  (function enablePanelDrag(){
    let dragging = false;
    let startY = 0;
    let startTop = 0;

    function clampTop(t){
      const frame = document.getElementById('videoFrame');
      const frameRect = frame.getBoundingClientRect();
      const panelRect = panel.getBoundingClientRect();
      const minTop = frameRect.top + 8;
      const maxTop = frameRect.bottom - panelRect.height - 8;
      return Math.min(Math.max(t, minTop), Math.max(minTop, maxTop));
    }

    panelHeader.addEventListener('mousedown', (e)=>{
      dragging = true;
      startY = e.clientY;
      const panelRect = panel.getBoundingClientRect();
      startTop = panelRect.top;
      panelHeader.style.cursor = 'grabbing';
      document.body.style.userSelect = 'none';
    });
    window.addEventListener('mousemove', (e)=>{
      if(!dragging) return;
      const dy = e.clientY - startY;
      const newTop = clampTop(startTop + dy);
      panel.style.top = `${newTop}px`;
      panel.style.bottom = 'auto';
      panel.style.position = 'fixed';
    });
    window.addEventListener('mouseup', ()=>{
      if(dragging){ dragging = false; panelHeader.style.cursor = 'grab'; document.body.style.userSelect = ''; }
    });

    // Touch
    panelHeader.addEventListener('touchstart', (ev)=>{
      const t = ev.touches[0];
      dragging = true;
      startY = t.clientY;
      const panelRect = panel.getBoundingClientRect();
      startTop = panelRect.top;
    }, {passive:true});
    window.addEventListener('touchmove', (ev)=>{
      if(!dragging) return;
      const t = ev.touches[0];
      const dy = t.clientY - startY;
      const newTop = clampTop(startTop + dy);
      panel.style.top = `${newTop}px`;
      panel.style.bottom = 'auto';
      panel.style.position = 'fixed';
    }, {passive:true});
    window.addEventListener('touchend', ()=>{ dragging = false; });
  })();

  /* Initialize defaults */
  function updateTimeBoxDisplay(){
    if(matchState === 'half'){ timeBox.textContent = 'HT'; }
    else if(matchState === 'full'){ timeBox.textContent = 'FT'; }
    else { timeBox.textContent = formatTime(timerSeconds); }
  }
  updateTimeBoxDisplay();
  teamAEl.textContent = 'PAK';
  teamBEl.textContent = 'IND';
  scoreAEl.textContent = '0';
  scoreBEl.textContent = '0';
  matchSim.textContent = 'Match Simulation';

  /* autoplay attempt */
  window.addEventListener('load', ()=>{ bgVideo.play().catch(()=>{}); });

  /* resize/orientation handler to recompute panel layout when open */
  window.addEventListener('resize', ()=>{ if(panel.style.display === 'flex' || panel.style.display === 'block') openPanel(); });
  window.addEventListener('orientationchange', ()=>{ setTimeout(()=>{ if(panel.style.display === 'flex' || panel.style.display === 'block') openPanel(); },250); });

  /* cleanup */
  window.addEventListener('beforeunload', ()=>{
    if(timerInterval) clearInterval(timerInterval);
    if(currentGoalAudio){ try{ currentGoalAudio.pause(); currentGoalAudio = null; }catch(e){} }
    if(goalTimerRef) clearTimeout(goalTimerRef);
  });

  /* keyboard shortcuts */
  document.addEventListener('keydown', (e)=>{
    if(e.code === 'Space'){ e.preventDefault(); timeBox.click(); }
    if(e.key === 'a' || e.key === 'A'){ scoreAEl.click(); }
    if(e.key === 'l' || e.key === 'L'){ scoreBEl.click(); }
  });
</script>
</body>
</html>